<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BS Finance Master Pro</title>
    <style>
        :root {
            --bg: #0b0f19;
            --card-bg: #161b2c;
            --primary: #10b981;
            --danger: #f43f5e;
            --accent: #6366f1;
            --warning: #f59e0b;
            --text: #ffffff;
            --text-dim: #94a3b8;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .app-container {
            width: 100%;
            max-width: 1100px;
            padding: 20px;
            box-sizing: border-box;
        }

        /* Header Section */
        header {
            text-align: center;
            padding: 40px 0;
            border-bottom: 1px solid #2d3748;
            margin-bottom: 30px;
        }

        .logo {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: #000;
            width: 60px;
            height: 60px;
            line-height: 60px;
            border-radius: 16px;
            font-weight: 900;
            font-size: 1.5rem;
            margin: 0 auto 15px;
            box-shadow: 0 10px 20px rgba(16, 185, 129, 0.3);
        }

        /* Dashboard Overview */
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--card-bg);
            padding: 25px;
            border-radius: 24px;
            border: 1px solid rgba(255,255,255,0.05);
            text-align: center;
            transition: transform 0.3s;
        }

        .stat-card:hover { transform: translateY(-5px); }
        .stat-label { color: var(--text-dim); font-size: 0.9rem; margin-bottom: 10px; display: block; }
        .stat-value { font-size: 2rem; font-weight: 800; }

        /* Input Sections Grid */
        .input-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        @media (max-width: 850px) { .input-grid { grid-template-columns: 1fr; } }

        .entry-panel {
            background: var(--card-bg);
            padding: 30px;
            border-radius: 28px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        h3 { margin-top: 0; color: var(--primary); font-size: 1.3rem; border-right: 4px solid var(--primary); padding-right: 15px; }

        /* Styled Form Elements */
        .form-group { margin-bottom: 20px; text-align: right; }
        label { display: block; margin-bottom: 8px; font-weight: 600; font-size: 0.85rem; color: var(--text-dim); }
        
        input, select, textarea {
            width: 100%;
            padding: 14px;
            background: #0f172a;
            border: 1px solid #2d3748;
            border-radius: 12px;
            color: white;
            font-size: 1rem;
            box-sizing: border-box;
            transition: border-color 0.3s;
        }

        input:focus { border-color: var(--primary); outline: none; }

        .btn {
            background: var(--primary);
            color: #0b0f19;
            padding: 16px;
            border: none;
            border-radius: 14px;
            font-weight: 800;
            font-size: 1rem;
            cursor: pointer;
            width: 100%;
            transition: 0.3s;
            margin-top: 10px;
        }

        .btn:hover { opacity: 0.9; transform: scale(1.01); }

        /* Forecast & History */
        .forecast-row { display: flex; gap: 15px; margin-top: 20px; }
        .f-item { flex: 1; background: #0f172a; padding: 15px; border-radius: 18px; text-align: center; border: 1px solid #2d3748; }
        
        .history-list { margin-top: 25px; max-height: 400px; overflow-y: auto; padding-left: 10px; }
        .item { 
            background: rgba(255,255,255,0.02); 
            margin-bottom: 12px; 
            padding: 15px; 
            border-radius: 16px; 
            display: flex; 
            justify-content: space-between;
            align-items: center;
        }

        .footer { text-align: center; padding: 60px 0; opacity: 0.5; font-size: 0.8rem; border-top: 1px solid #2d3748; margin-top: 40px; }
    </style>
</head>
<body>

<div class="app-container">
    <header>
        <div class="logo">BS</div>
        <h1 style="margin: 10px 0 5px;">×”××¨×›×– ×”×¤×™× × ×¡×™ ×©×œ ×‘×•×¢×–</h1>
        <p style="color: var(--text-dim);">× ×™×”×•×œ ×ª×–×¨×™× ××–×•×× ×™× ×•×ª×—×–×™×ª ×§×“×™××”</p>
    </header>

    <div class="dashboard">
        <div class="stat-card">
            <span class="stat-label">×”×›× ×¡×•×ª ×”×—×•×“×©</span>
            <div class="stat-value" id="dispInc" style="color: var(--primary);">â‚ª0</div>
        </div>
        <div class="stat-card">
            <span class="stat-label">×”×•×¦××•×ª ×•×”×—×–×¨×™×</span>
            <div class="stat-value" id="dispExp" style="color: var(--danger);">â‚ª0</div>
        </div>
        <div class="stat-card">
            <span class="stat-label">×™×ª×¨×” ×¤× ×•×™×”</span>
            <div class="stat-value" id="dispBal">â‚ª0</div>
        </div>
    </div>

    <div class="input-grid">
        <div class="entry-panel">
            <h3>ğŸ“¥ ×”×–× ×ª ×ª× ×•×¢×” ×—×“×©×”</h3>
            
            <div class="form-group">
                <label>×¡×•×’ ×”×”×•×¦××” / ×”×›× ×¡×”:</label>
                <select id="mainCat">
                    <optgroup label="×”×›× ×¡×•×ª">
                        <option value="income">ğŸ’° ×”×›× ×¡×” ×—×•×“×©×™×ª (××©×›×•×¨×ª)</option>
                        <option value="income">ğŸ’µ ×”×›× ×¡×” × ×•×¡×¤×ª / ×‘×œ×˜"× ×”×›× ×¡×”</option>
                    </optgroup>
                    <optgroup label="×”×•×¦××•×ª ×§×‘×•×¢×•×ª">
                        <option value="fixed">ğŸ  ××©×›× ×ª× / ×©×›×™×¨×•×ª</option>
                        <option value="fixed">ğŸš— ×¨×›×‘ (×”×œ×•×•××” / ×‘×™×˜×•×—)</option>
                        <option value="fixed">ğŸ”Œ ×—×©×‘×•× ×•×ª (×—×©××œ/××™×/××¨× ×•× ×”)</option>
                        <option value="fixed">ğŸ“º ×ª×§×©×•×¨×ª (××™× ×˜×¨× ×˜/×˜×œ×¤×•×Ÿ)</option>
                    </optgroup>
                    <optgroup label="×”×•×¦××•×ª ××©×ª× ×•×ª">
                        <option value="variable">ğŸ›’ ×¡×•×¤×¨ ×•×§× ×™×•×ª ×‘×™×ª</option>
                        <option value="variable">â›½ ×“×œ×§ ×•×ª×—×‘×•×¨×”</option>
                        <option value="variable">â˜• ×¤× ××™ ×•×‘×™×œ×•×™</option>
                    </optgroup>
                    <optgroup label="×—×¨×™×’×™×">
                        <option value="extra">ğŸ”¨ ×©×™×¤×•×¦×™× ×•×ª×—×–×•×§×ª ×‘×™×ª</option>
                        <option value="extra">âœˆï¸ ×—×•×¤×©×” / × ×•×¤×©</option>
                        <option value="extra">ğŸ†˜ ×‘×œ×˜"× / ×—×™×¨×•×</option>
                    </optgroup>
                </select>
            </div>

            <div class="form-group">
                <label>×ª×™××•×¨ ×§×¦×¨:</label>
                <input type="text" id="title" placeholder="×œ××©×œ: ×¡×•×¤×¨ ×¤××¨×, ××©×›×•×¨×ª 01">
            </div>

            <div class="form-group">
                <label>×¡×›×•× ×”×¤×¢×•×œ×” (â‚ª):</label>
                <input type="number" id="sum" placeholder="0.00">
            </div>

            <button class="btn" onclick="addItem()">×”×•×¡×£ ×œ×××–×Ÿ âœ¨</button>
            
            <div style="margin-top: 30px; border-top: 1px solid #2d3748; padding-top: 20px;">
                <label>×™×™×‘×•× ××”×™×¨ (×”×“×‘×§×” ××”×‘× ×§):</label>
                <textarea id="quickPaste" rows="2" placeholder="×”×“×‘×§ ×›××Ÿ ×˜×§×¡×˜ ××”×‘× ×§..."></textarea>
                <button class="btn" style="background: var(--accent); color: white;" onclick="importData()">× ×™×ª×•×— ×•×”×•×¡×¤×” âš¡</button>
            </div>
        </div>

        <div class="entry-panel">
            <h3>ğŸ”® ×ª×—×–×™×ª 3 ×—×•×“×©×™× ×§×“×™××”</h3>
            <div class="forecast-row" id="forecast">
                </div>

            <h3 style="margin-top: 40px;">ğŸ“œ ×ª× ×•×¢×•×ª ××—×¨×•× ×•×ª</h3>
            <div class="history-list" id="history">
                </div>
            
            <button onclick="clearAll()" style="background:none; border:none; color:var(--danger); cursor:pointer; font-size:0.8rem; margin-top:20px;">ğŸ—‘ï¸ ××™×¤×•×¡ × ×ª×•× ×™ ×—×•×“×©</button>
        </div>
    </div>

    <footer class="footer">
        <p><strong>×‘×•×¢×– ×¡×¢×“×” - ×¤×ª×¨×•× ×•×ª ×™×¦×™×¨×ª×™×™×</strong></p>
        <p>××¢×¨×›×ª × ×™×”×•×œ ×™×¦×™×‘×•×ª ×¤×™× × ×¡×™×ª ××™×©×™×ª Â© 2026</p>
    </footer>
</div>

<script>
    let db = JSON.parse(localStorage.getItem('bs_fin_v6') || '[]');

    function render() {
        const hist = document.getElementById('history');
        const fore = document.getElementById('forecast');
        let inc = 0, exp = 0, fixedInc = 0, fixedExp = 0;

        hist.innerHTML = '';
        db.forEach((item, i) => {
            const isInc = item.main === 'income';
            if(isInc) { inc += item.val; fixedInc += item.val; }
            else { 
                exp += item.val; 
                if(item.main === 'fixed') fixedExp += item.val;
            }

            hist.innerHTML += `
                <div class="item">
                    <div>
                        <strong>${item.title}</strong><br>
                        <small style="color:var(--text-dim)">${item.date}</small>
                    </div>
                    <span style="font-weight:bold; color:${isInc ? 'var(--primary)' : 'var(--danger)'}">
                        ${isInc ? '+' : '-'}${item.val.toLocaleString()} â‚ª
                    </span>
                </div>
            `;
        });

        document.getElementById('dispInc').innerText = `â‚ª${inc.toLocaleString()}`;
        document.getElementById('dispExp').innerText = `â‚ª${exp.toLocaleString()}`;
        document.getElementById('dispBal').innerText = `â‚ª${(inc - exp).toLocaleString()}`;

        // ×‘× ×™×™×ª ×ª×—×–×™×ª
        fore.innerHTML = '';
        let runningBal = inc - exp;
        for(let i=1; i<=3; i++) {
            if(i > 1) runningBal += (fixedInc - fixedExp);
            const isRed = runningBal < 0;
            fore.innerHTML += `
                <div class="f-item" style="border-color:${isRed ? 'var(--danger)' : '#2d3748'}">
                    <span style="font-size:0.7rem; color:var(--text-dim)">×—×•×“×© ${i}</span><br>
                    <strong style="color:${isRed ? 'var(--danger)' : 'var(--primary)'}">â‚ª${runningBal.toLocaleString()}</strong>
                </div>
            `;
        }
    }

    function addItem() {
        const title = document.getElementById('title').value;
        const val = parseFloat(document.getElementById('sum').value);
        const main = document.getElementById('mainCat').value;
        if(!val || !title) return alert("××œ× ×ª×™××•×¨ ×•×¡×›×•×");

        db.unshift({ title, val, main, date: new Date().toLocaleDateString('he-IL') });
        save();
        document.getElementById('title').value = '';
        document.getElementById('sum').value = '';
    }

    function importData() {
        const txt = document.getElementById('quickPaste').value;
        const sums = txt.match(/(\d{1,3}(?:,\d{3})*(?:\.\d+)?)/g);
        if(sums) {
            sums.forEach(s => {
                const val = parseFloat(s.replace(/,/g, ''));
                if(val > 30) db.unshift({ title: "×™×™×‘×•× ××”×™×¨", val, main: 'variable', date: new Date().toLocaleDateString('he-IL') });
            });
            document.getElementById('quickPaste').value = '';
            save();
            alert("×”× ×ª×•× ×™× × ×§×œ×˜×• ×‘×”×¦×œ×—×”!");
        }
    }

    function save() { localStorage.setItem('bs_fin_v6', JSON.stringify(db)); render(); }
    function clearAll() { if(confirm("×œ××—×•×§ ×”×›×œ?")) { db = []; save(); } }

    render();
</script>

</body>
</html>
